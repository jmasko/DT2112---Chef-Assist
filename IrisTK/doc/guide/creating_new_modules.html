<!DOCTYPE html>
<html class="no-js" lang="en" > 

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>IrisTK</title>
  <link rel="stylesheet" href="css/foundation.css">
  <link rel="stylesheet" href="css/pandoc.css">
  <script src="js/vendor/custom.modernizr.js"></script>
</head>
<body>

	<div class="row">
		<div class="large-12 columns">
			<h1><a href="index.html">IrisTK</a></h1>
			<p class="tagline">Java-based dialogue system framework</p>
			<hr/>
		</div>
	</div>

	<div class="row">
	
		<div class="large-8 columns">
			<h2 id="creating-new-modules">Creating new modules</h2>
<p>It is easy to create your own module by sub-classing IrisModule. Let's say you want to create your own dialogue manager (instead of using IrisFlow). This example shows a dialog manager that will simply repeat everything that the user says:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="kw">import iristk.speech.RecResult;</span>
<span class="kw">import iristk.system.Event;</span>
<span class="kw">import iristk.system.InitializationException;</span>
<span class="kw">import iristk.system.IrisModule;</span>

<span class="kw">public</span> <span class="kw">class</span> MyDialogManager <span class="kw">extends</span> IrisModule {
    
    <span class="fu">@Override</span>
    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onEvent</span>(Event event) {
        <span class="co">// We have received an event from some other module, </span>
        <span class="co">// check whether we should react to it</span>
        <span class="kw">if</span> (event.<span class="fu">triggers</span>(<span class="st">&quot;monitor.system.start&quot;</span>)) {
            <span class="co">// The system started, listen for speech</span>
            <span class="fu">listen</span>();
        } <span class="kw">else</span> <span class="kw">if</span> (event.<span class="fu">triggers</span>(<span class="st">&quot;sense.speech.rec**&quot;</span>)) {
            <span class="co">// We received a speech recognition result, get the text</span>
            String text = event.<span class="fu">getString</span>(<span class="st">&quot;text&quot;</span>);
            <span class="co">// Check whether there is any result</span>
            <span class="kw">if</span> (text != <span class="kw">null</span> &amp;&amp; text.<span class="fu">length</span>() &gt; <span class="dv">0</span>) {
                <span class="co">// Create an event for the speech synthesizer</span>
                Event newEvent = <span class="kw">new</span> Event(<span class="st">&quot;action.speech&quot;</span>);
                <span class="kw">if</span> (text.<span class="fu">equals</span>(RecResult.<span class="fu">NOMATCH</span>))
                    <span class="co">// We got a NOMATCH, inform the user</span>
                    newEvent.<span class="fu">put</span>(<span class="st">&quot;text&quot;</span>, <span class="st">&quot;I didn&#39;t understand that&quot;</span>);
                <span class="kw">else</span>
                    <span class="co">// Add the parameter text, which will repeat the speech recognition result</span>
                    newEvent.<span class="fu">put</span>(<span class="st">&quot;text&quot;</span>, <span class="st">&quot;You said &quot;</span> + text);
                <span class="fu">send</span>(newEvent);
            } <span class="kw">else</span> {
                <span class="co">// If not, listen again</span>
                <span class="fu">listen</span>();
            }
        } <span class="kw">else</span> <span class="kw">if</span> (event.<span class="fu">triggers</span>(<span class="st">&quot;monitor.speech.end&quot;</span>)) {
            <span class="co">// The synthesizer completed, listen for speech again</span>
            <span class="fu">listen</span>();
        }
    }
    
    <span class="co">// Make the recognizer start listening</span>
    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">listen</span>() {
        <span class="fu">send</span>(<span class="kw">new</span> Event(<span class="st">&quot;action.listen&quot;</span>));
    }

    <span class="fu">@Override</span>
    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">init</span>() <span class="kw">throws</span> InitializationException {
        <span class="co">// Initialize the module</span>
    }

}</code></pre>
<p>Now, if you create a <a href="tutorial_first_app.html">simple dialogue system</a>, you can remove the Flow module and add this module instead:</p>
<pre class="sourceCode java"><code class="sourceCode java"><span class="co">//system.addModule(new FlowModule(new GuessFlow()));</span>
system.<span class="fu">addModule</span>(<span class="kw">new</span> <span class="fu">MyDialogManager</span>());</code></pre>
<p>To see which events you can react to and produce, please refer to the list of <a href="events.html">standardized events</a>.</p>
<p>Note that the init() method is called when the module is added to the system. If you want to do something special when the system actually starts, you should catch the &quot;monitor.system.start&quot; event (as done in the example above).</p>
<h3 id="creating-a-new-speech-recognizer">Creating a new speech recognizer</h3>
<p>If you want to add your own speech recognizer, it is more convenient to implement the iristk.speech.Recognizer interface and then use it as an argument in the RecognzierModule constructor.</p>
<h3 id="create-a-new-speech-synthesizer">Create a new speech synthesizer</h3>
<p>If you want to add your own speech synthesizer, it is more convenient to implement the iristk.speech.Synthesizer interface and then use it as an argument in the SynthesizerModule constructor.</p>
		
		</div>

		<div class="large-4 columns">
			<h3>Guide to IrisTK</h3>
			
			<div class="section-container accordion" data-section="accordion">
				
				<section><p class="title" data-section-title><a href="#">Getting started</a></p><div class="content" data-section-content><ul class="side-nav"><li><a href="overview.html">Overview of IrisTK</a></li><li><a href="installation.html">Installation</a></li><li><a href="develop_in_eclipse.html">Develop in Eclipse</a></li><li><a href="tutorial_first_app.html">Tutorial 1: Your first application</a></li><li><a href="tutorial_sitint.html">Tutorial 2: Situated interaction</a></li><li><a href="tutorial_semantics.html">Tutorial 3: Semantics and dialog</a></li></ul></div></section><section class="active"><p class="title" data-section-title><a href="#">System, modules and events</a></p><div class="content" data-section-content><ul class="side-nav"><li><a href="system_overview.html">System and Events</a></li><li><a href="events.html">Standardized Events</a></li><li class="active"><a href="creating_new_modules.html">Creating new modules</a></li><li><a href="distributed_systems.html">Distributed systems</a></li></ul></div></section><section><p class="title" data-section-title><a href="#">IrisFlow</a></p><div class="content" data-section-content><ul class="side-nav"><li><a href="irisflow_overview.html">IrisFlow overview</a></li><li><a href="irisflow_reference.html">IrisFlow reference</a></li><li><a href="irisflow_advanced.html">Advanced topics</a></li></ul></div></section><section><p class="title" data-section-title><a href="#">Reference</a></p><div class="content" data-section-content><ul class="side-nav"><li><a href="microphones.html">Microphones</a></li><li><a href="furhat.html">Furhat robot head</a></li><li><a href="gestures.html">Facial gestures</a></li><li><a href="cereproc.html">Cereproc TTS</a></li><li><a href="../javadoc/index.html">Javadoc</a></li></ul></div></section>		
			  
			</div>
			
		</div>
	</div>
	
	
	<div class="row">
		<div class="large-12 columns">
			<hr/>
			<p>Copyright &copy; Gabriel Skantze, 2013-</p>
		</div>
	</div>

  <script>
  document.write('<script src=' +
  ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
  '.js><\/script>')
  </script>
  
  <script src="js/foundation.min.js"></script>

  <script src="js/foundation/foundation.js"></script>
  
  <script src="js/foundation/foundation.alerts.js"></script>
  
  <script src="js/foundation/foundation.clearing.js"></script>
  
  <script src="js/foundation/foundation.cookie.js"></script>
  
  <script src="js/foundation/foundation.dropdown.js"></script>
  
  <script src="js/foundation/foundation.forms.js"></script>
  
  <script src="js/foundation/foundation.joyride.js"></script>
  
  <script src="js/foundation/foundation.magellan.js"></script>
  
  <script src="js/foundation/foundation.orbit.js"></script>
  
  <script src="js/foundation/foundation.reveal.js"></script>
  
  <script src="js/foundation/foundation.section.js"></script>
  
  <script src="js/foundation/foundation.tooltips.js"></script>
  
  <script src="js/foundation/foundation.topbar.js"></script>
  
  <script src="js/foundation/foundation.interchange.js"></script>
  
  <script src="js/foundation/foundation.placeholder.js"></script>
  
  <script src="js/foundation/foundation.abide.js"></script>

  
  
  <script>
    $(document).foundation();
  </script>
</body>
</html>